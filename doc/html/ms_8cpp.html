<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Meanshift: src/ms/ms.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Meanshift
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2e60b13b157c40c7f9e5beeebdcff3d9.html">ms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ms.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for Meanshift algorithm.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ms.h&quot;</code><br />
<code>#include &lt;stack&gt;</code><br />
<code>#include &quot;../ra/TransitiveClosure.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ms.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="ms_8cpp__incl.png" border="0" usemap="#src_2ms_2ms_8cpp" alt=""/></div>
<map name="src_2ms_2ms_8cpp" id="src_2ms_2ms_8cpp">
<area shape="rect" id="node2" href="ms_8h_source.html" title="ms.h" alt="" coords="143,80,193,107"/>
<area shape="rect" id="node9" href="TransitiveClosure_8h_source.html" title="../ra/TransitiveClosure.h" alt="" coords="217,80,380,107"/>
<area shape="rect" id="node6" href="image_8h_source.html" title="../image/image.h" alt="" coords="123,155,242,181"/>
<area shape="rect" id="node10" href="RAList_8h_source.html" title="RAList.h" alt="" coords="355,155,429,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1236189e7ed18bfff1ec1abc02de7737"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ms_8cpp.html#a1236189e7ed18bfff1ec1abc02de7737">AddToStack</a> (std::stack&lt; <a class="el" href="structMSPoint.html">MSPoint</a> &gt; &amp;stack, int i, int j)</td></tr>
<tr class="memdesc:a1236189e7ed18bfff1ec1abc02de7737"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function AddToStack add point to the stack.  <a href="#a1236189e7ed18bfff1ec1abc02de7737">More...</a><br /></td></tr>
<tr class="separator:a1236189e7ed18bfff1ec1abc02de7737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa65ad2ef8d04df108ecdf3324a664c7f"><td class="memItemLeft" align="right" valign="top">uchar *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ms_8cpp.html#aa65ad2ef8d04df108ecdf3324a664c7f">MeanShift</a> (uchar *image, uchar *filtered_luv, int **labels, int width, int height, int spatial_radius, double color_radius, int minRegion, int num_iters)</td></tr>
<tr class="memdesc:aa65ad2ef8d04df108ecdf3324a664c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function MeanShift runs two phases of Mean shift algorithm Filter and Segment using Meanshift algorithm The main program for Meanshift Meanshift algorithm: First phase is image filtering. Filtered image is in L*u*v colorspace Second phase is image segmentation.  <a href="#aa65ad2ef8d04df108ecdf3324a664c7f">More...</a><br /></td></tr>
<tr class="separator:aa65ad2ef8d04df108ecdf3324a664c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3838214793438d3ada3662f11be936a1"><td class="memItemLeft" align="right" valign="top">uchar *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ms_8cpp.html#a3838214793438d3ada3662f11be936a1">MS_Filter</a> (uchar *image, int width, int height, int spatial_radius, double color_radius, int initIters)</td></tr>
<tr class="memdesc:a3838214793438d3ada3662f11be936a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function MS_Filter filter image usign Meanshift algorithm using a circular flat kernel and color distance in L*u*v colorspace.  <a href="#a3838214793438d3ada3662f11be936a1">More...</a><br /></td></tr>
<tr class="separator:a3838214793438d3ada3662f11be936a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20fca730748cd5586b1f86724d4a8f24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ms_8cpp.html#a20fca730748cd5586b1f86724d4a8f24">MS_Segment</a> (uchar *image, int width, int height, int **labels, double color_radius, int minRegion)</td></tr>
<tr class="memdesc:a20fca730748cd5586b1f86724d4a8f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function MS_Segment segments the image using Meanshift algorithm.  <a href="#a20fca730748cd5586b1f86724d4a8f24">More...</a><br /></td></tr>
<tr class="separator:a20fca730748cd5586b1f86724d4a8f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0123962474a1abc05771296d5c1d622"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ms_8cpp.html#ad0123962474a1abc05771296d5c1d622">MS_Cluster</a> (uchar *image, int width, int height, int **labels, int *modePoints, float *mode, double color_radius)</td></tr>
<tr class="memdesc:ad0123962474a1abc05771296d5c1d622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function MS_Cluster cluster the image using Meanshift.  <a href="#ad0123962474a1abc05771296d5c1d622">More...</a><br /></td></tr>
<tr class="separator:ad0123962474a1abc05771296d5c1d622"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for Meanshift algorithm. </p>
<dl class="section author"><dt>Author</dt><dd>Damir DemiroviÄ‡ <a href="#" onclick="location.href='mai'+'lto:'+'dam'+'ir'+'.de'+'mi'+'rov'+'ic'+'@un'+'tz'+'.ba'; return false;">damir<span style="display: none;">.nosp@m.</span>.dem<span style="display: none;">.nosp@m.</span>irovi<span style="display: none;">.nosp@m.</span>c@un<span style="display: none;">.nosp@m.</span>tz.ba</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1236189e7ed18bfff1ec1abc02de7737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1236189e7ed18bfff1ec1abc02de7737">&#9670;&nbsp;</a></span>AddToStack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddToStack </td>
          <td>(</td>
          <td class="paramtype">std::stack&lt; <a class="el" href="structMSPoint.html">MSPoint</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function AddToStack add point to the stack. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>x coordinate of the point </td></tr>
    <tr><td class="paramname">j</td><td>y coordinate of the point </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa65ad2ef8d04df108ecdf3324a664c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa65ad2ef8d04df108ecdf3324a664c7f">&#9670;&nbsp;</a></span>MeanShift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uchar* MeanShift </td>
          <td>(</td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>filtered_luv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>spatial_radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>color_radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minRegion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_iters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function MeanShift runs two phases of Mean shift algorithm Filter and Segment using Meanshift algorithm The main program for Meanshift Meanshift algorithm: First phase is image filtering. Filtered image is in L*u*v colorspace Second phase is image segmentation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>input image for Meanshift algorithm </td></tr>
    <tr><td class="paramname">filtered_luv</td><td>output image filtered with Meanshift algorithm </td></tr>
    <tr><td class="paramname">labels</td><td>labels </td></tr>
    <tr><td class="paramname">width</td><td>width of the image </td></tr>
    <tr><td class="paramname">height</td><td>height of the image </td></tr>
    <tr><td class="paramname">spatial_radius</td><td>spatial radius </td></tr>
    <tr><td class="paramname">color_radius</td><td>range radius </td></tr>
    <tr><td class="paramname">minRegion</td><td>minimal region for merging </td></tr>
    <tr><td class="paramname">num_iters</td><td>initial number of iterations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>segmented image </dd></dl>

</div>
</div>
<a id="ad0123962474a1abc05771296d5c1d622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0123962474a1abc05771296d5c1d622">&#9670;&nbsp;</a></span>MS_Cluster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MS_Cluster </td>
          <td>(</td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>modePoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>color_radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function MS_Cluster cluster the image using Meanshift. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>in L*u*v colorspace, </td></tr>
    <tr><td class="paramname">width</td><td>width of the image </td></tr>
    <tr><td class="paramname">height</td><td>height of the image </td></tr>
    <tr><td class="paramname">labels</td><td>contain labels </td></tr>
    <tr><td class="paramname">modePoints</td><td>data about mode points </td></tr>
    <tr><td class="paramname">mode</td><td>data about mode </td></tr>
    <tr><td class="paramname">color_radius</td><td>range radius </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>regCount number of regions </dd></dl>

</div>
</div>
<a id="a3838214793438d3ada3662f11be936a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3838214793438d3ada3662f11be936a1">&#9670;&nbsp;</a></span>MS_Filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uchar* MS_Filter </td>
          <td>(</td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>spatial_radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>color_radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>initIters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function MS_Filter filter image usign Meanshift algorithm using a circular flat kernel and color distance in L*u*v colorspace. </p>
<p>Based on implementation from <a href="https://imagej.nih.gov/ij/plugins/download/Mean_Shift.java">https://imagej.nih.gov/ij/plugins/download/Mean_Shift.java</a></p>
<p>For each pixel of the image and the set ot the neighboring pixels within the specified spatial radius and color distance is determined. For this set of neighbor pixels, the new spatial center an the new color mean values are calculated. These new values will serve as the new center for the next iteration. This procedure will iterate until the spatial and color means will stop changing or the maximal number of iterations is achieved.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>input image </td></tr>
    <tr><td class="paramname">width</td><td>width of the image </td></tr>
    <tr><td class="paramname">height</td><td>height of the image </td></tr>
    <tr><td class="paramname">spatial_radius</td><td>spatial radius </td></tr>
    <tr><td class="paramname">color_radius</td><td>range radius </td></tr>
    <tr><td class="paramname">initIters</td><td>initial number of iterations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>luv Meanshift filtered image in L*u*v colorspace. </dd></dl>

</div>
</div>
<a id="a20fca730748cd5586b1f86724d4a8f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20fca730748cd5586b1f86724d4a8f24">&#9670;&nbsp;</a></span>MS_Segment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MS_Segment </td>
          <td>(</td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>color_radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minRegion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function MS_Segment segments the image using Meanshift algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>in L*u*v colorspace, </td></tr>
    <tr><td class="paramname">width</td><td>width of the image </td></tr>
    <tr><td class="paramname">height</td><td>height of the image </td></tr>
    <tr><td class="paramname">labels</td><td>contain labels </td></tr>
    <tr><td class="paramname">color_radius</td><td>range radius </td></tr>
    <tr><td class="paramname">minRegion</td><td>minimal region for merging </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>regCount Number of segmented regions </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
